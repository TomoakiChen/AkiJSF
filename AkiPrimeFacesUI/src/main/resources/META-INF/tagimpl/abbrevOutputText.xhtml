<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:p="http://primefaces.org/ui"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:jsf="http://xmlns.jcp.org/jsf"
              xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">  

    <h:outputStylesheet library="tagimpl" name="/css/aki-pf-ui-common.css"/>

    <div jsf:rendered="#{empty rendered ? true : rendered}">
        
        <ui:fragment rendered="#{false}">            
            <!-- 
            以下這個也可以
            c:set var="componentId" value="abbrevOutputText-#{component.clientId}"/> 
            
            奇怪的是，不轉成 hashCode ，還是不能把 #{component.clientId} 放前面(hashCode我原本以為是有看到的一篇寫 「id 不能數字開頭」
            -->
            
        </ui:fragment>
        
        <c:set var="componentId" value="abbrevOutputText-#{component.clientId.hashCode()}"/>        
        <h:outputText id="#{componentId}" value="#{value}" converter="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner"
                      styleClass="like-link#{empty styleClass ? '' :  ' '.concat(styleClass)}" style="#{not empty style ? style : ''}"
                      escape="#{not empty escape ? escape : true}">     
            <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.PrefixLength" value="#{empty shortnerPre ? '14' : shortnerPre}"/>
            <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.SuffixLength" value="#{empty shortnerSuf ? '17' : shortnerSuf}"/>            
            <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.OmitSymbol" value="#{empty shortnerOmit ? '....' : shortnerOmit}"/>
        </h:outputText>
        
        <p:overlayPanel for="@previous" showCloseIcon="#{true}">
            <h:outputText value="#{value}" escape="#{not empty escape ? escape : true}"/>           
        </p:overlayPanel>
        
        <p:tooltip for="@previous" position="bottom" rendered="#{false}">
            <h:outputText value="#{value}" escape="#{not empty escape ? escape : true}"/>
        </p:tooltip>
        
        <ui:fragment rendered="#{false}">
            <!--
            <h:outputText value="#{value}" converter="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner"
                          styleClass="like-link#{empty styleClass ? '' :  ' '.concat(styleClass)}" style="#{style}">     
                <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.PrefixLength" value="#{empty shortnerPre ? '14' : shortnerPre}"/>
                <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.SuffixLength" value="#{empty shortnerSuf ? '17' : shortnerSuf}"/>            
                <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.OmitSymbol" value="#{empty shortnerOmit ? '....' : shortnerOmit}"/>
                <p:tooltip position="bottom">
                    <h:outputText value="#{value}"/>
                </p:tooltip>            
            </h:outputText>
            -->
        </ui:fragment>

        <ui:fragment rendered="#{false}">
            <!-- for="@previous" -->
            <!--
            <p:tooltip for="@parent" position="bottom">
                <h:outputText value="#{value}"/>
            </p:tooltip>
            -->
        </ui:fragment>

        <ui:fragment rendered="#{false}">
            <!--
            <c:set var="componentId" value="#{empty id ? component.clientId : id}"/>
            #{componentId}
            <h:outputText id="#{componentId}-abbrevOutputText" value="#{value}" converter="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner"
                          styleClass="like-link#{empty styleClass ? '' :  ' '.concat(styleClass)}" style="#{style}">     
                <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.PrefixLength" value="#{empty shortnerPre ? '14' : shortnerPre}"/>
                <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.SuffixLength" value="#{empty shortnerSuf ? '17' : shortnerSuf}"/>            
                <f:attribute name="tw.dev.tomoaki.util.jsf.JsfConverter4StringShortner.OmitSymbol" value="#{empty shortnerOmit ? '....' : shortnerOmit}"/>         
            </h:outputText>
            <p:tooltip for="@parent:#{componentId}-abbrevOutputText" position="bottom">
                <h:outputText value="#{value}"/>
            </p:tooltip>
            -->
        </ui:fragment>        
    </div>        
</ui:component>


<!--
從 composition 改成 component ......?
之後嘗試 akiPFComp 包(ui:include) ui:component 寫成的東西看看
-->